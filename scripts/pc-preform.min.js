!function(e){e.gallery=function(t,n){var i={btnPrevClass:"",btnNextClass:"",btnPrevInner:"Image précédente",btnNextInner:"Image suivante",btnCloseClass:"",btnCloseInner:"Fermer la galerie",loaderContent:'<div class="loader-item loader-item--1"></div><div class="loader-item loader-item--2"></div><div class="loader-item loader-item--3"></div>',closingDuration:400,moveDuration:500,responsiveImg:!1,responsiveKeyPoint:1e3,beforeAddStructure:function(){},afterAddStructure:function(){},beforeChangeSlide:function(){},afterChangeSlide:function(){}},s=this;s.settings={};var a,l,o,r,d,c,u,v,m,p,g,b,h,f,y,C,A,k=e(t),x=e("body"),w=[],L=[];s.init=function(){s.settings=e.extend({},i,n),k.on("click","a",(function(t){if(a=k.find("a"),t.preventDefault(),s.settings.responsiveImg&&e(window).width()<s.settings.responsiveKeyPoint){for(var n=0;n<a.length;n++)w[n]=a.eq(n).data("gl-responsive"),L[n]=a.eq(n).data("gl-caption");o=w.indexOf(e(this).data("gl-responsive"))}else{for(var i=0;i<a.length;i++)w[i]=a.eq(i).attr("href"),L[i]=a.eq(i).data("gl-caption");o=w.indexOf(e(this).attr("href"))}l=w.length,console.log(a),I(),x.addClass("gl-active").on("keydown",S),$itemsToMove=u.eq(o).prevAll();for(var r=$itemsToMove.length;r>0;r--)$itemsToMove.eq(r-1).appendTo(c);m=u.eq(o).addClass("is-active is-hidden"),D(m,w[o],0),y.html(L[o])}))};var I=function(){var t='<div class="gl" aria-hidden="true"><div class="gl-main"><div class="gl-slides" style="width:'+100*l+'%" ></div></div></div>';x.append(t),r=e(".gl").on("click",T),c=e(".gl-slides");for(var n=0;n<l;n++)c.append('<div class="gl-slide is-hidden slide-'+n+'" style="width:'+(100/l).toFixed(4)+'%"><div class="gl-slide-inner"></div></div>');u=e(".gl-slide"),r.prepend('<div class="gl-header"><div class="gl-counter"><span class="gl-counter-current">'+(o+1)+'</span> / <span class="gl-counter-all">'+w.length+"</span></div></div>"),r.append('<div class="gl-footer"><div class="gl-caption"></div></div>'),d=e(".gl-header"),y=e(".gl-caption"),C=e(".gl-counter"),A=e(".gl-counter-current"),l>1&&(d.append('<button class="gl-btn gl-btn-nav gl-btn-nav--prev reset-btn '+s.settings.btnPrevClass+'" aria-hidden="true" tabindex="-1"><span class="ico">'+s.settings.btnPrevInner+'</span></button><button class="gl-btn gl-btn-nav gl-btn-nav--next reset-btn '+s.settings.btnNextClass+'" aria-hidden="true" tabindex="-1"><span class="ico">'+s.settings.btnPrevInner+"</span></button>"),g=e(".gl-btn-nav").on("mouseup",(function(){e(this).blur()})),b=e(".gl-btn-nav--prev").on("click",(function(){E()})),h=e(".gl-btn-nav--next").on("click",(function(){q()}))),d.append('<button class="gl-btn gl-btn-close reset-btn '+s.settings.btnCloseClass+'"><span class="ico">'+s.settings.btnCloseInner+"</span></button>"),f=e(".gl-btn-close").on("click",(function(){z()})),r.append('<div class="gl-loader loader">'+s.settings.loaderContent+"</div>"),p=e(".loader"),s.settings.afterAddStructure(r,p,C,b,h,f,g)},S=function(e){switch(e.keyCode){case 27:z();break;case 37:l>1&&E();break;case 39:l>1&&q()}},E=function(){-1===(o-=1)&&(o=w.length-1),D(u.eq(o),w[o],-1)},q=function(){(o+=1)>w.length-1&&(o=0),D(u.eq(o),w[o],1)},z=function(){r.addClass("is-hidden"),setTimeout((function(){r.remove()}),s.settings.closingDuration),x.removeClass("gl-active").off("keydown",S),w=[],L=[]},T=function(t){e(t.target).is("img, button")||z()},D=function(t,n,i){t.hasClass("is-loaded")?0!==i&&P(i):(p.removeClass("is-hidden"),l>1&&g.addClass("is-loading"),e.ajax({url:n,cache:!0,processData:!1}).always((function(){p.addClass("is-hidden"),l>1&&g.removeClass("is-loading"),t.addClass("is-loaded").children().append('<img src="'+n+'" />'),j(t.find("img")),0===i?t.removeClass("is-hidden"):P(i)})))},P=function(e){s.settings.beforeChangeSlide(o),g.attr("disabled","disabled").addClass("is-disabled"),x.off("keydown",S),v=m.removeClass("is-active").addClass("is-leaving"),m=u.eq(o).addClass("is-coming"),e<0?(c.css("left",100*e+"%").children(":last").prependTo(c),v.addClass("is-leaving-to-right"),m.addClass("is-coming-from-left")):(v.addClass("is-leaving-to-left"),m.addClass("is-coming-from-right")),c.animate({left:"-="+100*e+"%"},{duration:s.settings.moveDuration*Math.abs(e),complete:function(){m.addClass("is-active").removeClass("is-coming"),v.removeClass("is-leaving"),g.removeAttr("disabled").removeClass("is-disabled"),x.on("keydown",S),e>0?(c.css("left","0").children(":first").appendTo(c),v.removeClass("is-leaving-to-left"),m.removeClass("is-coming-from-right")):(v.removeClass("is-leaving-to-right"),m.removeClass("is-coming-from-left")),A.text(o+1),y.html(L[o]),s.settings.afterChangeSlide(o)}})},j=function(e){var t;e[0].addEventListener("touchstart",(function(e){var n=e.changedTouches[0];t=parseInt(n.clientX),undefined.text(t),e.preventDefault()}),!1),e[0].addEventListener("touchend",(function(e){var n=e.changedTouches[0],i=parseInt(n.clientX)-t;Math.abs(i)>50&&(i>0?E():q()),e.preventDefault()}),!1)};s.foo_public_method=function(){},s.init()},e.fn.gallery=function(t){return this.each((function(){if(void 0===e(this).data("gallery")){var n=new e.gallery(this,t);e(this).data("gallery",n)}}))}}(jQuery),document.addEventListener("DOMContentLoaded",(()=>{const e=e=>{e.style.maxHeight="none",e.setAttribute("data-height",((e,t=16)=>e/t+"rem")(e.offsetHeight)),e.style.maxHeight=0},t=()=>"none"!=getComputedStyle(d).display,n=(e,t,n,s)=>{let a=s.find((e=>e.classList.contains("is-open")));a&&(openBtn=a.firstChild,openSubList=openBtn.nextSibling,i(a,openBtn,openSubList)),n.ontransitionend=null,n.style.visibility="visible",(navArgs.heightAnimation.small&&v||navArgs.heightAnimation.full&&!v)&&(n.style.maxHeight=n.dataset.height),t.setAttribute("aria-expanded","true"),e.classList.add("is-open")},i=(e,t,n)=>{(navArgs.heightAnimation.small&&v||navArgs.heightAnimation.full&&!v)&&(n.style.maxHeight=0),n.ontransitionend=()=>{n.style.visibility="hidden",t.setAttribute("aria-expanded","false")},e.classList.remove("is-open")},s=(e,t,s,a)=>{e.classList.contains("is-open")?i(e,t,s):n(e,t,s,a)},a=()=>{m?null==c.ontransitionend&&(c.ontransitionend=()=>{c.style.visibility="hidden",document.removeEventListener("keydown",l),d.setAttribute("aria-expanded","false"),c.setAttribute("aria-hidden","true"),m=!1},r.classList.remove("h-nav-is-open")):(c.ontransitionend=null,c.style.visibility="visible",document.addEventListener("keydown",l),r.classList.add("h-nav-is-open"),d.setAttribute("aria-expanded","true"),c.setAttribute("aria-hidden","false"),m=!0)},l=e=>{"Escape"==e.key&&a()},o=()=>{u.length>0&&u.forEach((t=>{let a=t.firstChild,l=a.nextSibling,o=(e=>{for(var t=[],n=e.parentNode.firstChild;n;)1===n.nodeType&&n!==e&&t.push(n),n=n.nextSibling;return t})(t);t.classList.contains("is-open")&&i(t,a,l),a.onclick=()=>{s(t,a,l,o)},v?(navArgs.heightAnimation.small&&e(l),t.classList.contains("is-active")&&n(t,a,l,o),t.onmouseenter=null,t.onmouseleave=null):(navArgs.heightAnimation.full||l.style.removeProperty("max-height"),t.onmouseenter=()=>{a.onclick=null,n(t,a,l,o)},t.onmouseleave=()=>{a.onclick=()=>{s(t,a,l,o)},i(t,a,l)})})),v?(c.setAttribute("aria-labelledby","#header-nav-btn"),c.setAttribute("aria-hidden","true"),c.style.visibility="hidden",d.onclick=()=>{a()},c.onclick=e=>{(e=>{e.target==c&&a()})(e)}):(d.onclick=null,c.onclick=null,c.ontransitionend=null,d.setAttribute("aria-expanded","false"),c.removeAttribute("aria-labelledby"),c.removeAttribute("aria-hidden"),c.removeAttribute("style"),r.classList.remove("h-nav-is-open"),m=!1)},r=document.querySelector("html"),d=document.querySelector(".h-nav-btn"),c=d.nextSibling,u=c.querySelectorAll(".h-p-nav-item--l1.is-parent");let v=t(),m=!1,p=null;window.addEventListener("resize",(()=>{clearTimeout(p),p=setTimeout((()=>{let e=t();v!=e&&(v=e,o())}),250)})),u.length>0&&u.forEach(((t,n)=>{let i=t.firstChild;i.setAttribute("id","h-nav-btn-submenu-"+n),i.setAttribute("aria-controls","h-nav-submenu-"+n),i.setAttribute("aria-expanded","false");let s=i.nextSibling;s.setAttribute("id","h-nav-submenu-"+n),s.setAttribute("aria-labelledby","h-nav-btn-submenu-"+n),s.style.visibility="hidden",(navArgs.heightAnimation.small&&v||navArgs.heightAnimation.full&&!v)&&e(s)})),o()}));var rem=function(e,t){return null==t&&(t=16),e/t+"rem"};document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".bloc-embed").forEach((e=>{const t=e.querySelector("iframe"),n=t.dataset.src,i=e.querySelector(".iframe-accept");e.querySelector("button").addEventListener("click",(()=>{t.setAttribute("src",n),i.remove()}))}))})),jQuery(document).ready((function(e){const t=e("body"),n=e("head");e(".diaporama").gallery({btnNextInner:sprite.arrow,btnPrevInner:sprite.arrow,btnCloseInner:sprite.cross,moveDuration:500,responsiveImg:!0}),e(".gallery-play").click((function(){e(this).parents("ul").find(">:first-child").children("a").click()})),e(".editor iframe").each((function(){e(this).wrap('<div class="iframe iframe_16-10"></div>')}));var i=e(".js-button-map");if(i.length>0){t.append('<div class="map"></div>');var s=e(".map"),a=!1,l=15,o=function(){s.removeClass("is-visible").empty(),t.off("keydown",r)},r=function(e){27==e.keyCode&&o()};i.click((function(){var i=e(this);s.append('<div id="map" class="map-inner"></div><div class="map-controls"><button type="button" class="map-btn-zoom map-btn-zoom--in button"><span class="ico">'+sprite.more+'</span></button><button type="button" class="map-btn-zoom map-btn-zoom--out button">'+sprite.less+'</button><button type="button" class="map-btn-hide button" title="Fermer" data-cible="map"><span class="ico">'+sprite.cross+"</span></button></div>");var d=i.data("lat"),c=i.data("long"),u=(s.find(".map-btn-zoom").mouseup((function(){e(this).blur()})),s.find(".map-btn-zoom--in")),v=s.find(".map-btn-zoom--out");if(s.find(".map-btn-hide").on("click",o),t.on("keydown",r),!a&&"undefined"==typeof L){a=!0;var m=e(document.createElement("link"));m.attr("href","https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"),m.attr("rel","stylesheet"),m.attr("integrity","sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="),m.attr("crossorigin",""),n.append(m);var p=e(document.createElement("script"));p.attr("src","https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"),p.attr("integrity","sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="),p.attr("crossorigin",""),t.append(p)}var g=setInterval((function(){if("undefined"!=typeof L){clearInterval(g),s.addClass("is-visible"),t.on("keydown",r);var n=L.map("map",{minZoom:10,maxZoom:18,zoomControl:!1,scrollWheelZoom:!1,tap:!1}).setView([d,c],15);L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGFwaWVyY29kZSIsImEiOiJja203a3E5N3kweXplMnhuNjBuOTV2bmQ1In0.UtKowadsitAGdxDUpMv5aA",{id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(n);var i=L.divIcon({iconSize:[40,60],iconAnchor:[20,60],className:"map-marker"});L.marker([d,c],{icon:i}).addTo(n);u.click((function(){n.zoomIn(),18==++l&&e(this).prop("disabled",!0),11==l&&v.prop("disabled",!1)})),v.click((function(){n.zoomOut(),10==--l&&e(this).prop("disabled",!0),17==l&&u.prop("disabled",!1)}))}}),100)}))}}));