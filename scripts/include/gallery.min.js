!function(e){e.gallery=function(n,t){var s={btnPrevClass:"",btnNextClass:"",btnPrevInner:"Image précédente",btnNextInner:"Image suivante",btnCloseClass:"",btnCloseInner:"Fermer la galerie",loaderContent:'<div class="loader-item loader-item--1"></div><div class="loader-item loader-item--2"></div><div class="loader-item loader-item--3"></div>',closingDuration:400,moveDuration:500,responsiveImg:!1,responsiveKeyPoint:1e3,beforeAddStructure:function(){},afterAddStructure:function(){},beforeChangeSlide:function(){},afterChangeSlide:function(){}},i=this;i.settings={};var a,l,o,d,r,c,g,v,u,f,p,h,m,b,C,y,I,x=e(n),k=e("body"),w=[],q=[];i.init=function(){i.settings=e.extend({},s,t),x.on("click","a",(function(n){if(a=x.find("a"),n.preventDefault(),i.settings.responsiveImg&&e(window).width()<i.settings.responsiveKeyPoint){for(var t=0;t<a.length;t++)w[t]=a.eq(t).data("gl-responsive"),q[t]=a.eq(t).data("gl-caption");o=w.indexOf(e(this).data("gl-responsive"))}else{for(var s=0;s<a.length;s++)w[s]=a.eq(s).attr("href"),q[s]=a.eq(s).data("gl-caption");o=w.indexOf(e(this).attr("href"))}l=w.length,D(),k.addClass("gl-active").on("keydown",T),$itemsToMove=g.eq(o).prevAll();for(var d=$itemsToMove.length;d>0;d--)$itemsToMove.eq(d-1).appendTo(c);u=g.eq(o).addClass("is-active is-hidden"),N(u,w[o],0),C.html(q[o])}))};var D=function(){var n='<div class="gl" aria-hidden="true"><div class="gl-main"><div class="gl-slides" style="width:'+100*l+'%" ></div></div></div>';k.append(n),d=e(".gl").on("click",M),c=e(".gl-slides");for(var t=0;t<l;t++)c.append('<div class="gl-slide is-hidden slide-'+t+'" style="width:'+(100/l).toFixed(4)+'%"><div class="gl-slide-inner"></div></div>');g=e(".gl-slide"),d.prepend('<div class="gl-header"><div class="gl-counter"><span class="gl-counter-current">'+(o+1)+'</span> / <span class="gl-counter-all">'+w.length+"</span></div></div>"),d.append('<div class="gl-footer"><div class="gl-caption"></div></div>'),r=e(".gl-header"),C=e(".gl-caption"),y=e(".gl-counter"),I=e(".gl-counter-current"),l>1&&(r.append('<button class="gl-btn gl-btn-nav gl-btn-nav--prev reset-btn '+i.settings.btnPrevClass+'" aria-hidden="true" tabindex="-1"><span class="ico">'+i.settings.btnPrevInner+'</span></button><button class="gl-btn gl-btn-nav gl-btn-nav--next reset-btn '+i.settings.btnNextClass+'" aria-hidden="true" tabindex="-1"><span class="ico">'+i.settings.btnPrevInner+"</span></button>"),p=e(".gl-btn-nav").on("mouseup",(function(){e(this).blur()})),h=e(".gl-btn-nav--prev").on("click",(function(){P()})),m=e(".gl-btn-nav--next").on("click",(function(){S()}))),r.append('<button class="gl-btn gl-btn-close reset-btn '+i.settings.btnCloseClass+'"><span class="ico">'+i.settings.btnCloseInner+"</span></button>"),b=e(".gl-btn-close").on("click",(function(){A()})),d.append('<div class="gl-loader loader">'+i.settings.loaderContent+"</div>"),f=e(".loader"),i.settings.afterAddStructure(d,f,y,h,m,b,p)},T=function(e){switch(e.keyCode){case 27:A();break;case 37:l>1&&P();break;case 39:l>1&&S()}},P=function(){-1===(o-=1)&&(o=w.length-1),N(g.eq(o),w[o],-1)},S=function(){(o+=1)>w.length-1&&(o=0),N(g.eq(o),w[o],1)},A=function(){d.addClass("is-hidden"),setTimeout((function(){d.remove()}),i.settings.closingDuration),k.removeClass("gl-active").off("keydown",T),w=[],q=[]},M=function(n){e(n.target).is("img, button")||A()},N=function(n,t,s){n.hasClass("is-loaded")?0!==s&&j(s):(f.removeClass("is-hidden"),l>1&&p.addClass("is-loading"),e.ajax({url:t,cache:!0,processData:!1}).always((function(){f.addClass("is-hidden"),l>1&&p.removeClass("is-loading"),n.addClass("is-loaded").children().append('<img src="'+t+'" />'),$(n.find("img")),0===s?n.removeClass("is-hidden"):j(s)})))},j=function(e){i.settings.beforeChangeSlide(o),p.attr("disabled","disabled").addClass("is-disabled"),k.off("keydown",T),v=u.removeClass("is-active").addClass("is-leaving"),u=g.eq(o).addClass("is-coming"),e<0?(c.css("left",100*e+"%").children(":last").prependTo(c),v.addClass("is-leaving-to-right"),u.addClass("is-coming-from-left")):(v.addClass("is-leaving-to-left"),u.addClass("is-coming-from-right")),c.animate({left:"-="+100*e+"%"},{duration:i.settings.moveDuration*Math.abs(e),complete:function(){u.addClass("is-active").removeClass("is-coming"),v.removeClass("is-leaving"),p.removeAttr("disabled").removeClass("is-disabled"),k.on("keydown",T),e>0?(c.css("left","0").children(":first").appendTo(c),v.removeClass("is-leaving-to-left"),u.removeClass("is-coming-from-right")):(v.removeClass("is-leaving-to-right"),u.removeClass("is-coming-from-left")),I.text(o+1),C.html(q[o]),i.settings.afterChangeSlide(o)}})},$=function(e){var n;e[0].addEventListener("touchstart",(function(e){var t=e.changedTouches[0];n=parseInt(t.clientX),undefined.text(n),e.preventDefault()}),!1),e[0].addEventListener("touchend",(function(e){var t=e.changedTouches[0],s=parseInt(t.clientX)-n;Math.abs(s)>50&&(s>0?P():S()),e.preventDefault()}),!1)};i.foo_public_method=function(){},i.init()},e.fn.gallery=function(n){return this.each((function(){if(void 0===e(this).data("gallery")){var t=new e.gallery(this,n);e(this).data("gallery",t)}}))}}(jQuery),jQuery(document).ready((function(e){e(".diaporama").gallery({btnNextInner:sprite.arrow,btnPrevInner:sprite.arrow,btnCloseInner:sprite.cross,moveDuration:500,responsiveImg:!0}),e(".gallery-play").click((function(){e(this).parents("ul").find(">:first-child").children("a").click()}))}));